{% extends "base.html" %}
{% load static %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
{% block content %}
<div class="content-wrapper">
    <!-- Content -->
    <div class="container-xxl flex-grow-1 container-p-y">
        <div class="card mb-4">
            <div id="results" class="col-lg-12 col-md-12 order-1">
                <div style="display: flex; align-items: center;justify-content: space-between;">
                    <div>
                        <h5 class="card-header">Xabarlar</h5>
                        <p class="text-muted ms-4 mb-0">Xabar yozish</p>
                    </div>
                </div>
                <div class="card-body">
                    <form action="" method="post">
                        {% csrf_token %}
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="content" id="content1"
                                onclick="showContent('content1')" required>
                            <label class="form-check-label" for="content1">
                                Maqola
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="content" id="content2"
                                onclick="showContent('content2')" required>
                            <label class="form-check-label" for="content2">
                                Yutuqlar
                            </label>
                        </div>

                        {{form| crispy}}
                        <button type="submit" class="btn btn-primary w-25 float-end mb-3">Yuborish</button>
                    </form>

                    <br>
                    <br>
                    <br>
                    <hr>
                    <table id="datatablesSimple">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Talaba</th>
                                <th>Type</th>
                                <th>Nomi</th>
                                <th>Xabar</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>#</th>
                                <th>Talaba</th>
                                <th>Type</th>
                                <th>Nomi</th>
                                <th>Xabar</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            {% for message in messages %}
                            <tr>
                                <td>{{ message.counter }}</td>
                                <td><a href="/students/{{ message.student.id }}/">{{message.student.base_student}}</a></td>
                                <td>{% if message.article %} Maqola {% else %}Yutuq{% endif %}</td>
                                <td>{% if message.article %} {{ message.article }} {% else %}{{ message.win }}{% endif %}</td>
                                <td>{{message.letter|truncatewords:30}}</td>
                            </tr>
                            {% endfor %}


                        </tbody>
                    </table>

                </div>
            </div>
        </div>


    </div>

</div>
<!-- / Content -->

<!-- Footer -->
<footer class="content-footer footer bg-footer-theme">
    <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
        <div class="mb-2 mb-md-0">
            Â©
            <script>
                document.write(new Date().getFullYear());
            </script>

        </div>

    </div>
</footer>
<!-- / Footer -->

<div class="content-backdrop fade"></div>
</div>


<script>
    function showContent(contentId) {
        var content1Div = document.getElementById('article-select');
        var content2Div = document.getElementById('win-select');
      

        if (contentId === 'content1') {
            content1Div.style.display = 'flex';
            content2Div.style.display = 'none';
            content1Div.required=true;


        } else if (contentId === 'content2') {
            content1Div.style.display = 'none';
            content2Div.style.display = 'block';
            content2Div.required=true;
        }

    }

</script>

{% endblock content %}